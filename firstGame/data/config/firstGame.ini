[Display]
Title           = Space Shooter
FullScreen      = false
Decoration      = false
Smoothing       = false
VSync           = true

[Resource]
Texture         = ../data/texture
Sound           = ../data/sound

[Physics]
AllowSleep      = false
Gravity         = (0, 2400)
ShowDebug       = true
DimensionRatio  = 0.1

[Input]
SetList         = MainInput

[Scene]
ChildList       = enemySpawner

[enemySpawner]
Spawner         = @
Object          = spiderObject
WaveSize        = 1
WaveDelay       = 1

[MainInput]
KEY_ESCAPE      = Quit
KEY_A           = GoLeft
KEY_D           = GoRight
MOUSE_LEFT      = Shoot
KEY_SPACE       = Jump
KEY_X           = PickUp

[Viewport]
Camera          = Camera
BackgroundColor = (173, 216, 230)

[Camera]
Zoom            = 4
FrustumWidth    = 1280
FrustumHeight   = 720
FrustumFar      = 2
FrustumNear     = 0
Position        = (0, 0, -1)
IgnoreFromParent= scale

[cameraObject]
TrackList       = @
0               = > Camera.Get Camera, Camera.SetParent < ^

[playerObject]
HorizontalSpeed = 80
JumpSpeed       = (0, -1340)
Graphic         = playerGraphic
AnimationSet    = playerAnimationSet
Body            = playerBody
ChildList       = cameraObject # DebugObject

[playerGraphic]
Texture         = player_full.png
TextureOrigin   = (0, 0)
TextureSize     = (32, 32)
Pivot           = center

[playerAnimationSet]
Texture         = player_full.png
FrameSize       = (32, 32)
Pivot           = center

playerIdleRight       = 4
playerIdleLeft        = 4
playerWalkRight       = 8
playerWalkLeft        = 8

playerIdleRightPistol = 4
playerIdleLeftPistol  = 4
playerWalkRightPistol = 8
playerWalkLeftPistol  = 8

playerIdleRightRifle  = 4
playerIdleLeftRifle   = 4
playerWalkRightRifle  = 8
playerWalkLeftRifle   = 8

StartAnim               = playerIdleRight
playerIdleRight->       = playerIdleRight # .playerIdleLeft # .playerWalkRight # .playerIdleRightPistol # .playerIdleRightRifle
playerIdleLeft->        = playerIdleLeft # .playerIdleRight # .playerWalkLeft # .playerIdleLeftPistol # .playerIdleLeftRifle
playerWalkRight->       = playerWalkRight # +.playerIdleRight
playerWalkLeft->        = playerWalkLeft # +.playerIdleLeft

playerIdleRightPistol-> = playerIdleRightPistol # .playerIdleLeftPistol # .playerWalkRightPistol # .playerIdleRight
playerIdleLeftPistol->  = playerIdleLeftPistol # .playerIdleRightPistol # .playerWalkLeftPistol # .playerIdleLeft
playerWalkRightPistol-> = playerWalkRightPistol # +.playerIdleRightPistol
playerWalkLeftPistol->  = playerWalkLeftPistol # +.playerIdleLeftPistol

playerIdleRightRifle->  = playerIdleRightRifle # .playerIdleLeftRifle # .playerWalkRightRifle # .playerIdleRight
playerIdleLeftRifle->   = playerIdleLeftRifle # .playerIdleRightRifle # .playerWalkLeftRifle # .playerIdleLeft
playerWalkRightRifle->  = playerWalkRightRifle # +.playerIdleRightRifle
playerWalkLeftRifle->   = playerWalkLeftRifle # +.playerIdleLeftRifle

[playerIdleRight1]
KeyEvent        = Object.SetScale ^ (1, 1)

[playerIdleRight]
KeyDuration     = 0.2
TextureOrigin   = (0, 64)

[playerWalkRight1]
KeyEvent        = Object.SetScale ^ (1, 1)

[playerWalkRight]
KeyDuration     = 0.1
TextureOrigin   = (0, 0)

[playerIdleLeft1]
KeyEvent        = Object.SetScale ^ (-1, 1)

[playerIdleLeft]
Flip            = x
KeyDuration     = 0.2
TextureOrigin   = (128, 64)

[playerWalkLeft1]
KeyEvent        = Object.SetScale ^ (-1, 1)

[playerWalkLeft]
Flip            = x
KeyDuration     = 0.1
TextureOrigin   = (0, 32)

[playerIdleRightPistol1]
KeyEvent        = Object.SetScale ^ (1, 1)

[playerIdleRightPistol]
KeyDuration     = 0.2
TextureOrigin   = (0, 96)

[playerIdleLeftPistol1]
KeyEvent        = Object.SetScale ^ (-1, 1)

[playerIdleLeftPistol]
Flip            = x
KeyDuration     = 0.2
TextureOrigin   = (128, 96)

[playerWalkRightPistol1]
KeyEvent        = Object.SetScale ^ (1, 1)

[playerWalkRightPistol]
KeyDuration     = 0.1
TextureOrigin   = (0, 128)

[playerWalkLeftPistol1]
KeyEvent        = Object.SetScale ^ (-1, 1)

[playerWalkLeftPistol]
Flip            = x
KeyDuration     = 0.1
TextureOrigin   = (0, 160)

[playerIdleRightRifle1]
KeyEvent        = Object.SetScale ^ (1, 1)

[playerIdleRightRifle]
KeyDuration     = 0.2
TextureOrigin   = (0, 192)

[playerIdleLeftRifle1]
KeyEvent        = Object.SetScale ^ (-1, 1)

[playerIdleLeftRifle]
Flip            = x
KeyDuration     = 0.2
TextureOrigin   = (128, 192)

[playerWalkRightRifle1]
KeyEvent        = Object.SetScale ^ (1, 1)

[playerWalkRightRifle]
KeyDuration     = 0.1
TextureOrigin   = (0, 224)

[playerWalkLeftRifle1]
KeyEvent        = Object.SetScale ^ (-1, 1)

[playerWalkLeftRifle]
Flip            = x
KeyDuration     = 0.1
TextureOrigin   = (0, 256)

[playerBody]
Dynamic         = true
PartList        = playerBodyPart
FixedRotation   = true
LinearDamping   = 5

[playerBodyPart]
Type            = box
Solid           = true
SelfFlags       = player
CheckMask       = platforms # weapons
BottomRight     = (6, 12)
TopLeft         = (-4, -4)

[Enemy]
IsEnemy         = true
ChildList       = DebugObject

[DebugObject]
Scale           = 0.25
Pivot           = top
Graphic         = @
Text            = @
TrackList       = @
Loop            = true
UseParentSpace  = position
Position        = (0, 0.5)
IgnoreFromParent= scale position.scale rotation position.rotation
0               = > Object.GetParent ^, > Object.GetAnim < true, Object.SetText ^ "Anim: <"

[spiderObject@Enemy]
HorizontalSpeed = 19
Graphic         = spiderGraphic
Position        = (0) ~ (250, 0)
AnimationSet    = spiderAnimationSet
Body            = enemyBody

[spiderGraphic]
Texture         = spider_full.png
TextureOrigin   = (0, 0)
TextureSize     = (32, 32)
Pivot           = center

[enemyAnimationSet]
Pivot           = center
KeyDuration     = 0.1
FrameSize       = (32, 32)
WalkRight       = 5
WalkLeft        = 5

StartAnim       = WalkLeft

WalkLeft->      = WalkLeft # .WalkRight # .DeadLeft
WalkRight->     = WalkRight # .WalkLeft # .DeadRight

[WalkLeft]
TextureOrigin   = (0, 32)

[WalkRight]
TextureOrigin   = (0, 0)

[DeadLeft]
TextureOrigin   = (0, 96)

[DeadLeft5]
TextureOrigin   = (0, 0)
KeyEvent        = Object.SetLifeTime ^ 0

[DeadRight]
TextureOrigin   = (0, 64)

[DeadRight5]
TextureOrigin   = (0, 0)
KeyEvent        = Object.SetLifeTime ^ 0

[spiderAnimationSet@enemyAnimationSet]
Texture         = spider_full.png

[enemyBody]
FixedRotation   = true
Dynamic         = true
PartList        = enemyBodyPart
LinearDamping   = 5

[enemyBodyPart]
Type            = box
Solid           = true
SelfFlags       = enemy
CheckMask       = platforms # bullet
BottomRight     = (7, 3)
TopLeft         = (-6, -5)

[pistolObject]
Graphic         = pistolGraphic
Position        = (8, 9)
Body            = pistolBody

[pistolGraphic]
Texture         = pistol.png
TextureSize     = (32, 32)
Pivot           = center

[pistolBody]
FixedRotation   = true
Dynamic         = falses
PartList        = pistolBodyPart

[pistolBodyPart]
Type            = box
Solid           = false
SelfFlags       = weapons
CheckMask       = player
BottomRight     = (6, 6)
TopLeft         = (-6, -6)

[rifleObject]
Graphic         = rifleGraphic
Position        = (15, 9)
Body            = rifleBody

[rifleGraphic]
Texture         = rifle.png
TextureSize     = (32, 32)
Pivot           = center

[rifleBody]
FixedRotation   = true
Dynamic         = false
PartList        = rifleBodyPart

[rifleBodyPart]
Type            = box
Solid           = false
SelfFlags       = weapons
CheckMask       = player
BottomRight     = (6, 3)
TopLeft         = (-6, -9)

[playersPistol@PlayerGun]
Spawner         = pistolBulletSpawner
Position        = (5, 5)

[bulletGraphic]
Pivot           = left
Texture         = bullet.png

[pistolBulletObject]
Graphic         = bulletGraphic
LifeTime        = 0.7
Body            = bulletBody

[pistolBulletSpawner]
Object          = pistolBulletObject
WaveSize        = 1
WaveDelay       = 0.17
Position        = (3, -4)
ObjectSpeed     = (120, 0)
UseRelativeSpeed= true

[playersRifle@PlayerGun]
Spawner         = rifleBulletSpawner
Position        = (5, 5)

[PlayerGun]
TrackList       = PlayerGunTrack

[PlayerGunTrack]
0               = >> Object.FindNext playerObject, Object.SetParent ^ <, Object.SetOwner ^ <

[rifleBulletObject]
Graphic         = bulletGraphic
LifeTime        = 1.0
Body            = bulletBody

[rifleBulletSpawner]
Object          = rifleBulletObject
WaveSize        = 1
WaveDelay       = 0.1
ObjectSpeed     = (120, 0, 0)
UseRelativeSpeed= true

[bulletBody]
FixedRotation   = true
Dynamic         = false
PartList        = bulletBodyPart
LinearDamping   = 5

[bulletBodyPart]
Type            = box
Solid           = false
SelfFlags       = bullet
CheckMask       = enemy

[spaceShipMiddlePlatformGraphic]
Texture         = Spaceship_platform_middle.png

[spaceShipMiddlePlatformObject]
Graphic         = spaceShipMiddlePlatformGraphic
Position        = (-20, 10)
Scale           = (9, 1)
Repeat          = (9, 1)
Body            = PlatformBody

[PlatformBody]
FixedRotation   = true
Dynamic         = false
PartList        = PlatformBodyPart

[PlatformBodyPart]
Type            = box
Solid           = true
SelfFlags       = platforms
CheckMask       = player # enemy
